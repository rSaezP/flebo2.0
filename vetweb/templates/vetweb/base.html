{% load static %}
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Laboratorio Veterinario{% endblock %}</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="{% static 'vetweb/css/style.css' %}" />
    <link rel="stylesheet" href="{% static 'vetweb/css/new_style.css' %}" />
    {% block extra_css %}{% endblock %}
  </head>
  <body>
   <!-- Navegación Principal -->
<nav class="navbar navbar-expand-lg">
  <div class="container">
    <a class="navbar-brand" href="{% url 'vetweb:index' %}">
      <img
        src="{% static 'vetweb/img/logo_flebo.png' %}"
        alt="FleboVet"
        class="logo"
      />
    </a>
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarMain"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarMain">
      <ul class="navbar-nav mx-auto">
        <li class="nav-item">
          <a class="nav-link" href="{% url 'vetweb:index' %}">INICIO</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'vetweb:productos' %}">PRODUCTOS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'vetweb:quienes_somos' %}">QUIÉNES SOMOS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'vetweb:contacto' %}">CONTACTO</a>
        </li>
      </ul>
      <div class="header-icons">
        {% if user.is_authenticated %}
          <div class="dropdown">
            <a href="#" class="nav-icon dropdown-toggle" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="bi bi-person-circle"></i>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
              {% if user.is_staff or user.userprofile.role == 'ADMIN' %}
                <!-- Menú para ADMINISTRADORES -->
                <li><a class="dropdown-item" href="{% url 'vetweb:admin_dashboard' %}">Panel Admin</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="{% url 'vetweb:logout' %}">Cerrar Sesión</a></li>
              {% else %}
                <!-- Menú para CLIENTES -->
                <li><a class="dropdown-item" href="{% url 'vetweb:profile' %}">Mi Perfil</a></li>
                <li><a class="dropdown-item" href="{% url 'vetweb:lista_deseos_view' %}">Lista de Deseos</a></li>
                <li><a class="dropdown-item" href="{% url 'vetweb:historial_compras' %}">Mis Compras</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="{% url 'vetweb:logout' %}">Cerrar Sesión</a></li>
              {% endif %}
            </ul>
          </div>
          
          <!-- Carrito solo para CLIENTES autenticados -->
          {% if not user.is_staff and user.userprofile.role != 'ADMIN' %}
            <a href="{% url 'vetweb:carrito_ver' %}" class="nav-icon">
              <i class="bi bi-cart3"></i>
              {% if user.carrito.items.count > 0 %}
              <span class="cart-badge">{{ user.carrito.items.count }}</span>
              {% endif %}
            </a>
          {% endif %}
        {% else %}
          <!-- Para usuarios NO autenticados - solo login -->
          <a href="{% url 'vetweb:login' %}" class="nav-icon">
            <i class="bi bi-person-circle"></i>
          </a>
        {% endif %}
      </div>
    </div>
  </div>
</nav>
    <!-- Mensajes de notificación -->
    {% if messages %}
    <div class="container mt-3">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Contenido Principal -->
    {% block content %}{% endblock %}

    <!-- Footer -->
    <footer class="footer-modern">
      <div class="footer-waves">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
          <path
            fill="#f0f7ff"
            d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,154.7C960,171,1056,181,1152,165.3C1248,149,1344,107,1392,85.3L1440,64L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"
          ></path>
        </svg>
      </div>
      <div class="footer-content">
        <div class="container">
          <div class="row g-4">
            <!-- Sobre Nosotros -->
            <div class="col-lg-4">
              <div class="footer-widget">
                <h5><i class="fas fa-info-circle"></i> Sobre Nosotros</h5>
                <p>
                  Especialistas en equipamiento y productos para laboratorio
                  clínico veterinario, comprometidos con la excelencia y calidad
                  en el servicio.
                </p>
              </div>
            </div>
            <!-- Enlaces Rápidos -->
            <div class="col-lg-4">
              <div class="footer-widget">
                <h5><i class="fas fa-link"></i> Enlaces Rápidos</h5>
                <ul class="footer-links">
                  <li>
                    <a href="{% url 'vetweb:productos' %}"
                      ><i class="fas fa-chevron-right"></i> Productos</a
                    >
                  </li>

                  <li>
                    <a href="{% url 'vetweb:contacto' %}"
                      ><i class="fas fa-chevron-right"></i> Contacto</a
                    >
                  </li>
                </ul>
              </div>
            </div>
            <!-- Contáctanos -->
            <div class="col-lg-4">
              <div class="footer-widget">
                <h5><i class="fas fa-phone-alt"></i> Contáctanos</h5>
                <ul class="contact-info">
                  <li>
                    <i class="fas fa-phone"></i>
                    <a href="tel:+56933912923">+56 9 3391 2923</a>
                  </li>
                  <li>
                    <i class="fas fa-envelope"></i>
                    <a href="mailto:ventas@flebo.cl">ventas@flebo.cl</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-copyright">
        © {% now 'Y' %} FleboVet. Todos los derechos reservados.
      </div>
    </footer>

    <!-- WhatsApp Float -->
    <a href="https://wa.me/+56933912923" class="whatsapp-float" target="_blank">
      <i class="fab fa-whatsapp"></i>
    </a>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const navbar = document.querySelector(".navbar");

        window.addEventListener("scroll", function () {
          if (window.scrollY > 50) {
            navbar.classList.add("scrolled");
          } else {
            navbar.classList.remove("scrolled");
          }
        });
      });
    </script>
    {% block extra_js %}{% endblock %}
  </body>
</html>